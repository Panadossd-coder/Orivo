<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>ORIVO — Admin Panel</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <link rel="stylesheet" href="style.css" />

  <style>
    body {
      background: var(--bg-main);
      color: var(--text-main);
      min-height: 100vh;
    }

    .admin-wrapper {
      max-width: 1000px;
      margin: 0 auto;
      padding: 60px 24px;
    }

    .admin-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 40px;
    }

    .admin-header h2 {
      font-family: 'Playfair Display', serif;
      font-size: 28px;
    }

    .admin-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      gap: 24px;
    }

    .admin-card {
      background: var(--bg-card);
      border-radius: 18px;
      padding: 24px;
      box-shadow: var(--shadow-soft);
      cursor: pointer;
      transition: transform 0.25s ease;
    }

    .admin-card:hover {
      transform: translateY(-4px);
    }

    .logout-btn {
      font-size: 13px;
      border: 1px solid var(--border);
      padding: 8px 14px;
      border-radius: 999px;
      cursor: pointer;
      background: transparent;
    }

    /* HERO MODAL */
    #heroEditor,
    #featuredEditor,
    #productEditor {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.6);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 999;
    }

    .modal {
      background: white;
      border-radius: 18px;
      padding: 32px;
      width: 100%;
      max-width: 440px;
      max-height: 90vh;
      overflow-y: auto;
    }

    #heroPreview,
    #featuredPreview {
      width: 100%;
      max-height: 240px;
      object-fit: cover;
      border-radius: 14px;
      display: none;
      margin: 16px 0;
    }
  </style>
</head>

<body>

<div class="admin-wrapper">

  <div class="admin-header">
    <h2>ORIVO Admin Panel</h2>
    <button class="logout-btn" onclick="logout()">Logout</button>
  </div>

  <div class="admin-grid">

    <div class="admin-card" onclick="openHeroEditor()">
      <h3>Hero Section</h3>
      <p>Edit headline, text & hero image</p>
    </div>

    <div class="admin-card" onclick="openProductEditor()">
  <h3>Shop Products</h3>
  <p>Change images, names & prices</p>
</div>

    <div class="admin-card" onclick="openFeaturedEditor()">
      <h3>Featured Pieces</h3>
      <p>Select homepage featured products</p>
    </div>

    <div class="admin-card">
      <h3>Theme & Appearance</h3>
      <p>Accent colors & dark mode defaults</p>
    </div>

  </div>
</div>

<!-- ================= HERO MODAL ================= -->
<div id="heroEditor">
  <div class="modal">

    <h3>Edit Hero Section</h3>

    <label>Hero Title</label>
    <input id="heroTitle" style="width:100%; padding:12px; margin:8px 0 16px;" />

    <label>Hero Subtitle</label>
    <textarea id="heroSubtitle" style="width:100%; padding:12px; margin:8px 0 16px;"></textarea>

<label>Hero Badge Text</label>
<input
  id="heroBadge"
  style="width:100%; padding:12px; margin:8px 0 16px;"
  placeholder="e.g. WIC"
/>

    <label>Hero Background Image</label>
    <input type="file" id="heroImageInput" accept="image/*" />

    <img id="heroPreview" />

    <div style="display:flex; gap:12px; margin-top:16px;">
      <button class="btn btn-primary" onclick="saveHero()">Save</button>
      <button class="btn btn-outline" onclick="closeHeroEditor()">Cancel</button>
    </div>

  </div>
</div>


<!-- ================= FEATURED MODAL ================= -->
<div id="featuredEditor">
  <div class="modal">

    <h3>Featured Pieces (Max 4)</h3>

    <div id="featuredList" style="display:flex; flex-direction:column; gap:14px; margin-bottom:24px;"></div>

    <hr style="margin:24px 0;" />

    <label>Product Name</label>
    <input id="featuredTitle" style="width:100%; padding:12px; margin:8px 0 12px;" />

    <label>Price ($)</label>
    <input id="featuredPrice" type="number" style="width:100%; padding:12px; margin:8px 0 12px;" />

    <label>Product Image</label>
    <input type="file" id="featuredImageInput" accept="image/*" />

    <img id="featuredPreview" />

    <div style="display:flex; gap:12px;">
      <button class="btn btn-primary" onclick="addFeatured()">Add</button>
      <button class="btn btn-outline" onclick="closeFeaturedEditor()">Close</button>
    </div>

  </div>
</div>

<!-- ================= SHOP PRODUCTS MODAL ================= -->
<div id="productEditor">
  <div class="modal">

    <h3>Add Product</h3>

    <label>Product Name</label>
    <input id="productName" style="width:100%; padding:12px; margin:8px 0 12px;" />

    <label>Price</label>
    <input id="productPrice" type="number" style="width:100%; padding:12px; margin:8px 0 12px;" />

    <label>Product Image</label>
    <input type="file" id="productImageInput" accept="image/*" />

    <img id="productPreview" style="width:100%; max-height:200px; object-fit:contain; margin:16px 0; display:none;" />

    <div style="display:flex; gap:12px;">
      <button type="button" class="btn btn-primary" onclick="addProduct()">Add Product</button>
      <button class="btn btn-outline" onclick="closeProductEditor()">Close</button>
    </div>

  </div>
</div>

<script>
/* ACCESS GUARD */
if (localStorage.getItem("orivo_admin") !== "unlocked") {
  window.location.href = "admin.html";
}

function logout() {
  localStorage.removeItem("orivo_admin");
  window.location.href = "admin.html";
}

/* HERO STATE */
let heroImageBase64 = localStorage.getItem("orivo_hero_image");

function openHeroEditor() {
  heroEditor.style.display = "flex";
  heroTitle.value = localStorage.getItem("orivo_hero_title") || "";
  heroSubtitle.value = localStorage.getItem("orivo_hero_subtitle") || "";
  heroBadge.value = localStorage.getItem("orivo_hero_badge") || "";
  if (heroImageBase64) {
    heroPreview.src = heroImageBase64;
    heroPreview.style.display = "block";
  }
}

function closeHeroEditor() {
  heroEditor.style.display = "none";
}

heroImageInput.addEventListener("change", () => {
  const file = heroImageInput.files[0];
  if (!file) return;
  const reader = new FileReader();
  reader.onload = () => {
    heroImageBase64 = reader.result;
    heroPreview.src = heroImageBase64;
    heroPreview.style.display = "block";
  };
  reader.readAsDataURL(file);
});

function saveHero() {
  localStorage.setItem("orivo_hero_title", heroTitle.value);
  localStorage.setItem("orivo_hero_subtitle", heroSubtitle.value);
  localStorage.setItem("orivo_hero_badge", heroBadge.value);
  localStorage.setItem("orivo_hero_image", heroImageBase64);
  alert("Hero updated");
  closeHeroEditor();
}
</script>

<script>
/* FEATURED STATE */
let featuredImageBase64 = null;
let featuredItems = JSON.parse(localStorage.getItem("orivo_featured")) || [];

function openFeaturedEditor() {
  featuredEditor.style.display = "flex";
  renderFeaturedList();
}

function closeFeaturedEditor() {
  featuredEditor.style.display = "none";
  featuredPreview.style.display = "none";
  featuredImageBase64 = null;
}

featuredImageInput.addEventListener("change", () => {
  const file = featuredImageInput.files[0];
  if (!file) return;
  const reader = new FileReader();
  reader.onload = () => {
    featuredImageBase64 = reader.result;
    featuredPreview.src = featuredImageBase64;
    featuredPreview.style.display = "block";
  };
  reader.readAsDataURL(file);
});

function addFeatured() {
  if (featuredItems.length >= 4) return alert("Max 4 items");
  if (!featuredTitle.value || !featuredPrice.value || !featuredImageBase64)
    return alert("All fields required");

  featuredItems.push({
    id: Date.now(),
    title: featuredTitle.value,
    price: featuredPrice.value,
    image: featuredImageBase64
  });

  localStorage.setItem("orivo_featured", JSON.stringify(featuredItems));
  featuredTitle.value = "";
  featuredPrice.value = "";
  featuredImageInput.value = "";
  featuredPreview.style.display = "none";
  featuredImageBase64 = null;

  renderFeaturedList();
}

function deleteFeatured(id) {
  featuredItems = featuredItems.filter(i => i.id !== id);
  localStorage.setItem("orivo_featured", JSON.stringify(featuredItems));
  renderFeaturedList();
}

function renderFeaturedList() {
  featuredList.innerHTML = "";
  featuredItems.forEach(item => {
    const div = document.createElement("div");
    div.style.display = "flex";
    div.style.alignItems = "center";
    div.style.gap = "12px";
    div.innerHTML = `
      <img src="${item.image}" style="width:56px;height:56px;border-radius:8px;object-fit:cover">
      <div style="flex:1">
        <strong>${item.title}</strong><br>$${item.price}
      </div>
      <button onclick="deleteFeatured(${item.id})" style="border:none;background:none;color:red">✕</button>
    `;
    featuredList.appendChild(div);
  });
}
</script>

<!-- ================= SHOP PRODUCTS SCRIPT ================= -->
<script>
/* SHOP PRODUCTS STATE */
let productImageBase64 = null;
let products = JSON.parse(localStorage.getItem("orivo_products")) || [];

function openProductEditor() {
  productEditor.style.display = "flex";
}

function closeProductEditor() {
  productEditor.style.display = "none";
  productPreview.style.display = "none";
  productImageBase64 = null;
  productImageInput.value = "";
}

productImageInput.addEventListener("change", () => {
  const file = productImageInput.files[0];
  if (!file) return;
  const reader = new FileReader();
  reader.onload = () => {
    productImageBase64 = reader.result;
    productPreview.src = productImageBase64;
    productPreview.style.display = "block";
  };
  reader.readAsDataURL(file);
});

function addProduct() {
  if (!productName.value || !productPrice.value || !productImageBase64) {
    alert("All fields required");
    return;
  }

  products.push({
    id: Date.now(),
    name: productName.value,
    price: productPrice.value,
    image: productImageBase64
  });

  localStorage.setItem("orivo_products", JSON.stringify(products));

  productName.value = "";
  productPrice.value = "";
  closeProductEditor();

  alert("Product added");
}
</script>

</body>
</html>