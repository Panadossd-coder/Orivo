<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>ORIVO — Admin Panel</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <link rel="stylesheet" href="style.css" />

  <style>
    body {
      background: var(--bg-main);
      color: var(--text-main);
      min-height: 100vh;
    }

    .admin-wrapper {
      max-width: 1000px;
      margin: 0 auto;
      padding: 60px 24px;
    }

    .admin-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 40px;
    }

    .admin-header h2 {
      font-family: 'Playfair Display', serif;
      font-size: 28px;
    }

    .admin-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      gap: 24px;
    }

    .admin-card {
      background: var(--bg-card);
      border-radius: 18px;
      padding: 24px;
      box-shadow: var(--shadow-soft);
      cursor: pointer;
      transition: transform 0.25s ease;
    }

    .admin-card:hover {
      transform: translateY(-4px);
    }

    .logout-btn {
      font-size: 13px;
      border: 1px solid var(--border);
      padding: 8px 14px;
      border-radius: 999px;
      cursor: pointer;
      background: transparent;
    }

    /* MODAL */
    #heroEditor {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.6);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 999;
    }

    #heroEditor .modal {
      background: white;
      border-radius: 18px;
      padding: 32px;
      width: 100%;
      max-width: 420px;
      max-height: 90vh;
      overflow-y: auto;
    }

    #heroPreview {
      width: 100%;
      max-height: 260px;
      object-fit: cover;
      border-radius: 14px;
      display: none;
      margin: 16px 0;
    }
  </style>
</head>

<body>

<div class="admin-wrapper">

  <div class="admin-header">
    <h2>ORIVO Admin Panel</h2>
    <button class="logout-btn" onclick="logout()">Logout</button>
  </div>

  <div class="admin-grid">

    <div class="admin-card" onclick="openHeroEditor()">
      <h3>Hero Section</h3>
      <p>Edit headline, text & hero image</p>
    </div>

    <div class="admin-card">
      <h3>Shop Products</h3>
      <p>Change images, names & prices</p>
    </div>

    <div class="admin-card">
      <h3>Featured Pieces</h3>
      <p>Select homepage featured products</p>
    </div>

    <div class="admin-card">
      <h3>Theme & Appearance</h3>
      <p>Accent colors & dark mode defaults</p>
    </div>

  </div>
</div>

<!-- HERO MODAL -->
<div id="heroEditor">
  <div class="modal">

    <h3>Edit Hero Section</h3>

    <label>Hero Title</label>
    <input id="heroTitle" style="width:100%; padding:12px; margin:8px 0 16px;" />

    <label>Hero Subtitle</label>
    <textarea id="heroSubtitle" style="width:100%; padding:12px; margin:8px 0 16px;"></textarea>

    <label>Hero Background Image</label>
    <input type="file" id="heroImageInput" accept="image/*" />

    <img id="heroPreview" />

    <div style="display:flex; gap:12px; margin-top:16px;">
      <button class="btn btn-primary" onclick="saveHero()">Save</button>
      <button class="btn btn-outline" onclick="closeHeroEditor()">Cancel</button>
    </div>

  </div>
</div>

<script>
/* =========================
   ACCESS GUARD
   ========================= */
if (localStorage.getItem("orivo_admin") !== "unlocked") {
  window.location.href = "admin.html";
}

function logout() {
  localStorage.removeItem("orivo_admin");
  window.location.href = "admin.html";
}

/* =========================
   HERO STATE
   ========================= */
let heroImageBase64 = localStorage.getItem("orivo_hero_image");

/* =========================
   OPEN MODAL
   ========================= */
function openHeroEditor() {
  document.getElementById("heroEditor").style.display = "flex";

  heroTitle.value = localStorage.getItem("orivo_hero_title") || "";
  heroSubtitle.value = localStorage.getItem("orivo_hero_subtitle") || "";

  if (heroImageBase64) {
    heroPreview.src = heroImageBase64;
    heroPreview.style.display = "block";
  }
}

function closeHeroEditor() {
  document.getElementById("heroEditor").style.display = "none";
}

/* =========================
   IMAGE → BASE64
   ========================= */
heroImageInput.addEventListener("change", () => {
  const file = heroImageInput.files[0];
  if (!file) return;

  const reader = new FileReader();
  reader.onload = () => {
    heroImageBase64 = reader.result;
    heroPreview.src = heroImageBase64;
    heroPreview.style.display = "block";
  };
  reader.readAsDataURL(file);
});

/* =========================
   SAVE HERO
   ========================= */
function saveHero() {
  if (!heroImageBase64) {
    alert("Please upload a hero image");
    return;
  }

  localStorage.setItem("orivo_hero_title", heroTitle.value);
  localStorage.setItem("orivo_hero_subtitle", heroSubtitle.value);
  localStorage.setItem("orivo_hero_image", heroImageBase64);

  alert("Hero updated successfully");
  closeHeroEditor();
}
</script>

</body>
</html>