<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>ORIVO â€” Wear Your Identity</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Styles -->
  <link rel="stylesheet" href="style.css" />
</head>
<body class="dark">

  <!-- HEADER -->
  <header class="header">
    <div class="logo">ORIVO</div>
    <nav class="nav">
      <a href="index.html" class="active">Home</a>
      <a href="shop.html">Shop</a>
    </nav>
    <button id="themeToggle" class="btn btn-outline" style="padding:8px 18px;">Theme</button>
  </header>

  <!-- HERO -->
  <section class="hero" id="heroSection">

<video
  id="heroVideo"
  muted
  loop
  autoplay
  playsinline
  preload="auto"
  style="
    position:absolute;
    inset:0;
    width:100%;
    height:100%;
    object-fit:cover;
    z-index:-2;
    display:none;
    pointer-events:none;
  "
></video>

  <!-- HERO IMAGE (FALLBACK / OVERLAY) -->
  <img
  id="heroImage"
  alt="ORIVO Hero"
  hidden
/>

  <!-- HERO DARK OVERLAY -->
  <div class="hero-overlay"></div>

  <h1 id="heroTitle">Wear Your Identity</h1>
  <p id="heroSubtitle">A modern fashion brand focused on presence...</p>

  <div style="display:flex; gap:16px; justify-content:center;">
    <a href="shop.html" class="btn btn-primary">Explore Collection</a>
    <a href="shop.html" class="btn btn-outline">View Lookbook</a>
  </div>
  
  <!-- HERO GLASS TAG -->
<div id="heroBadgeWrap">
  <div id="heroBadge">
    <span id="heroBadgeText">Wic</span>
  </div>
</div>
</section>
<!-- END HERO GLASS TAG -->

<!-- ================= CATEGORY SECTION ================= -->
<section class="categories">

  <h2>Shop by Category</h2>

  <div class="category-grid">

  <div class="category-card clothes" data-category="clothes">
    <img id="catImageClothes" alt="Clothes category">
    <div class="category-label" id="catLabelClothes">Clothes</div>
  </div>

  <div class="category-card perfumes" data-category="perfumes">
    <img id="catImagePerfumes" alt="Perfumes category">
    <div class="category-label" id="catLabelPerfumes">Perfumes</div>
  </div>

  <div class="category-card shoes" data-category="shoes">
    <img id="catImageShoes" alt="Shoes category">
    <div class="category-label" id="catLabelShoes">Shoes</div>
  </div>

  <div class="category-card hoodies" data-category="hoodies">
    <img id="catImageHoodies" alt="Hoodies category">
    <div class="category-label" id="catLabelHoodies">Hoodies</div>
  </div>

</div>

</section>
<!-- =============== END CATEGORY SECTION =============== -->

  <!-- FEATURED -->
 <section class="reveal">
  <h2>Featured Pieces</h2>

  <div class="featured-slider">
    <div class="featured-card">
      <img src="images/hero.jpg" alt="Classic Ivory Shirt">
      <h4>Classic Ivory Shirt</h4>
      <span>$45</span>
    </div>

    <div class="featured-card">
      <img src="images/hero.jpg" alt="Minimal Black Tee">
      <h4>Minimal Black Tee</h4>
      <span>$30</span>
    </div>

    <div class="featured-card">
      <img src="images/hero.jpg" alt="Structured Overshirt">
      <h4>Structured Overshirt</h4>
      <span>$95</span>
    </div>
  </div>
</section>

  <!-- FOOTER -->
  <footer class="footer">
    <p>Â© 2026 ORIVO. All rights reserved.</p>
  </footer>
<script src="script.js"></script>

<script>
  const heroTitle = localStorage.getItem("orivo_hero_title");
  const heroSubtitle = localStorage.getItem("orivo_hero_subtitle");
  const heroImage = localStorage.getItem("orivo_hero_image");
  const heroBadge = localStorage.getItem("orivo_hero_badge");
  if (heroTitle) {
    document.getElementById("heroTitle").textContent = heroTitle;
  }

  if (heroSubtitle) {
    document.getElementById("heroSubtitle").textContent = heroSubtitle;
  }

  const heroSection = document.getElementById("heroSection");
const heroImgEl = document.getElementById("heroImage");

const hasHeroImage =
  heroImage &&
  heroImage !== "" &&
  heroImgEl.complete &&
  heroImgEl.naturalWidth > 0;
const hasHeroVideo = localStorage.getItem("orivo_hero_video") === "indexeddb";

// ðŸ”¥ Toggle image-based spacing
heroSection.classList.toggle("has-hero-image", hasHeroImage);
if (hasHeroImage) {
  heroImgEl.src = heroImage;
  heroImgEl.style.display = "block";
} else {
  heroImgEl.src = "";
  heroImgEl.style.display = "none";
}

/* ðŸ”¥ CONTROL HERO SPACING */
if (!hasHeroImage && !hasHeroVideo) {
  heroSection.classList.add("no-hero-media");
} else {
  heroSection.classList.remove("no-hero-media");
}

    if (heroBadge) {
    document.getElementById("heroBadgeText").textContent = heroBadge;
  }
</script>

<script>
  if (!sessionStorage.getItem("orivo_css_refresh")) {
    sessionStorage.setItem("orivo_css_refresh", "1");
    const links = document.querySelectorAll("link[rel='stylesheet']");
    links.forEach(link => {
      link.href = link.href.split("?")[0] + "?v=" + Date.now();
    });
  }
</script>

<script>
  document.querySelectorAll(".category-card").forEach(card => {
    card.addEventListener("click", () => {
      const category = card.dataset.category;

      // save selected category
      localStorage.setItem("orivo_selected_category", category);

      // go to shop
      window.location.href = "shop.html";
    });
  });
</script>
 
<script>
/* Safari BFCache fix â€” hero relayout */
window.addEventListener("pageshow", function (event) {
  if (event.persisted) {
    const heroImg = document.getElementById("heroImage");
    if (heroImg) {
      heroImg.style.display = "none";
      heroImg.offsetHeight; // force reflow
      heroImg.style.display = "";
    }
  }
});
</script>

<script>
/* HERO VIDEO â€” LOAD FROM INDEXEDDB */
let heroVideoURL = null;

function loadHeroVideo() {
  return new Promise((resolve) => {
    const request = indexedDB.open("orivoHeroDB", 1);

    request.onsuccess = () => {
      const db = request.result;

      if (!db.objectStoreNames.contains("videos")) {
        resolve(null);
        return;
      }

      const tx = db.transaction("videos", "readonly");
      const store = tx.objectStore("videos");
      const getReq = store.get("heroVideo");

      getReq.onsuccess = () => {
        if (getReq.result) {
          heroVideoURL = URL.createObjectURL(getReq.result);
          resolve(heroVideoURL);
        } else {
          resolve(null);
        }
      };

      getReq.onerror = () => resolve(null);
    };

    request.onerror = () => resolve(null);
  });
}
</script>

<script>
document.addEventListener("DOMContentLoaded", async () => {
  const videoEl = document.getElementById("heroVideo");
  if (!videoEl) return;

  const url = await loadHeroVideo();
  if (!url) return;

  videoEl.src = url;
  videoEl.muted = true;
  videoEl.loop = true;
  videoEl.playsInline = true;
  videoEl.style.display = "block";

  const playPromise = videoEl.play();
  if (playPromise !== undefined) {
    playPromise.catch(() => {
      videoEl.muted = true;
      videoEl.play();
    });
  }
});
</script>

<script>
/* ===== SAFARI BFCache HERO FIX (FINAL) ===== */
window.addEventListener("pageshow", function (event) {
  if (!event.persisted) return; // only when Safari restores from cache

  const hero = document.getElementById("heroSection");
  const heroImg = document.getElementById("heroImage");
  const heroVideo = document.getElementById("heroVideo");

  if (!hero) return;

  /* 1ï¸âƒ£ Force layout recalculation */
  hero.style.display = "none";
  hero.offsetHeight; // force reflow
  hero.style.display = "";

  /* 2ï¸âƒ£ Reset hero image position */
  if (heroImg) {
    heroImg.style.transform = "translateZ(0)";
    heroImg.style.willChange = "transform";
  }

  /* 3ï¸âƒ£ Resume video safely */
  if (heroVideo && heroVideo.src) {
    heroVideo.pause();
    heroVideo.currentTime = 0;
    heroVideo.play().catch(() => {});
  }
});
</script>
</body>
</html>